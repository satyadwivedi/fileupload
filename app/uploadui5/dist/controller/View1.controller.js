sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/m/MessageToast","sap/m/UploadCollectionParameter","sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,t,o,n,a,i){"use strict";return e.extend("com.satya.upload.uploadui5.controller.View1",{onInit:function(){this.oModel=this.getOwnerComponent().getModel()},onChange:function(e){var t=e.getSource();var o=this;var n=new FileReader;var a=e.getParameter("files")[0];n.onload=function(e){o.raw=e.target.result};n.onerror=function(e){sap.m.MessageToast.show("error")};n.readAsDataURL(a)},onStartUpload:function(e){var n=this;const a=this.getView().byId("UploadCollection");if(a.getItems().length===0){o.show("file missing");return}var i={fileID:"0010",appName:"SF",Items:[{fileID:"0010",itemsNo:"00010",fileName:a.getItems()[0].getFileName(),mediaType:"application/octet-stream",content:this.raw}]};i=JSON.stringify(i);$.ajax({url:"/v2/browseUpload/FileHeader",type:"POST",data:i,contentType:"application/json",success:function(e){var o=e.d.Items.results[0].ID;t.success("File Uploaded successfully")},error:function(e){console.log(`Error ${e}`)}})},onDisplayFiles:function(){var e=this;$.ajax({url:"/v2/browseUpload/FileItems",type:"GET",success:function(t){e.getView().byId("idFileTable").setModel(new a(t.d.results),"File")},error:function(e){console.log(`Error ${e}`)}})},onDownloadFile:function(e){var t=e.getSource();var n=t.getBindingContext("File").getObject().fileName;var a=t.getBindingContext("File").getObject().ID;$.ajax({url:`/v2/browseUpload/FileItems(guid'${a}')/content`,type:"GET",contentType:"application/octet-stream",success:function(e){var t=document.createElement("a");t.innerHTML="Download PDF file";t.download=n;t.href=e;t.click();o.show("File Downloaded")},error:function(e){o.show(e)}})}})});